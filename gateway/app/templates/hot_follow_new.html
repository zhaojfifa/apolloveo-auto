<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ t("hot.follow.new.title") }}</title>
  <link rel="stylesheet" href="/static/i18n.css" />
  <link rel="stylesheet" href="/static/css/ui_v185.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="page">
    {% set ui_q = "?ui_locale=" ~ ui_locale if ui_locale else "" %}
    {% set topbar_title = t("hot.follow.new.title") %}
    {% set topbar_subtitle = t("hot.follow.new.subtitle") %}
    {% set topbar_nav = [
      {"label": t("common.tasks"), "href": "/tasks" ~ ui_q, "active": False},
      {"label": t("hot.follow.nav"), "href": "/tasks/hot-follow" ~ ui_q, "active": True},
      {"label": t("common.tools"), "href": "/tools/hub" ~ ui_q, "active": False},
    ] %}
    {% set topbar_actions = [
      {"label": t("common.back_task_board"), "href": "/tasks" ~ ui_q, "primary": False},
    ] %}
    {% include "_topbar.html" %}

    <main class="max-w-7xl mx-auto px-6 py-6">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
        <section class="lg:col-span-5 space-y-6">
          <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-lg font-semibold">{{ t("hot.follow.new.form_title") }}</h2>
              <span class="text-xs text-gray-400">P1</span>
            </div>
            <div class="space-y-4">
              <div>
                <label for="hf-url" class="block text-sm font-semibold text-gray-700">{{ t("label.source_url") }}</label>
                <input id="hf-url" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="{{ t('label.source_url.placeholder') }}" />
                <div class="text-xs text-gray-500 mt-1" id="hf-url-hint"></div>
              </div>

              <div>
                <label for="hf-platform" class="block text-sm font-semibold text-gray-700">{{ t("label.platform") }}</label>
                <select id="hf-platform" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2">
                  <option value="auto">Auto</option>
                  <option value="douyin">{{ t("label.platform_douyin") }}</option>
                  <option value="xhs">{{ t("label.platform_xhs") }}</option>
                  <option value="tiktok">{{ t("label.platform_tiktok") }}</option>
                  <option value="fb">{{ t("label.platform_fb") }}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6">
            <h3 class="text-base font-semibold mb-4">{{ t("hot.follow.new.probe_title") }}</h3>
            <div id="hf-probe" class="flex items-center gap-4 rounded-xl border border-dashed border-gray-300 p-4">
              <img id="hf-cover" class="h-20 w-20 rounded-xl bg-gray-100 object-cover" alt="cover" />
              <div>
                <div id="hf-title" class="text-sm font-semibold text-gray-900"></div>
                <div id="hf-duration" class="text-xs text-gray-500 mt-1"></div>
                <div id="hf-platform-text" class="text-xs text-gray-500"></div>
              </div>
            </div>
            <div class="text-xs text-gray-500 mt-2" id="hf-probe-msg"></div>
          </div>

          <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6">
            <h3 class="text-base font-semibold mb-4">{{ t("hot.follow.new.bgm_title") }}</h3>
            <div class="space-y-4">
              <div class="flex flex-wrap gap-4 text-sm">
                <label class="inline-flex items-center gap-2"><input type="radio" name="bgm_strategy" value="replace" checked /> {{ t("hot.follow.new.bgm_replace") }}</label>
                <label class="inline-flex items-center gap-2"><input type="radio" name="bgm_strategy" value="keep" /> {{ t("hot.follow.new.bgm_keep") }}</label>
                <label class="inline-flex items-center gap-2"><input type="radio" name="bgm_strategy" value="mute" /> {{ t("hot.follow.new.bgm_mute") }}</label>
              </div>
              <input id="hf-bgm" type="file" accept="audio/*" />
              <div>
                <label class="block text-sm font-semibold text-gray-700">{{ t("hot.follow.new.bgm_mix") }}</label>
                <input id="hf-mix" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2" type="number" min="0" max="1" step="0.05" value="0.8" />
              </div>
            </div>
          </div>
        </section>

        <section class="lg:col-span-7 space-y-6">
          <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-6">
            <div class="flex items-center justify-between mb-4">
              <h2 class="text-lg font-semibold">加工流水线配置</h2>
              <span class="text-xs text-gray-400">Config</span>
            </div>

            <div class="space-y-5">
              <div>
                <label class="block text-sm font-semibold text-gray-700">目标语言</label>
                <select name="target_lang" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2">
                  <option value="zh">中文</option>
                  <option value="mm">မြန်မာ</option>
                  <option value="en">English</option>
                </select>
              </div>

              <div>
                <div class="text-sm font-semibold text-gray-700 mb-2">处理模式</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <label class="flex items-start gap-3 rounded-xl border border-gray-200 p-4 cursor-pointer">
                    <input type="radio" name="process_mode" value="fast_clone" checked class="mt-1" />
                    <div>
                      <div class="text-sm font-semibold text-gray-900">极速复刻</div>
                      <div class="text-xs text-gray-500">优先速度，快速产出</div>
                    </div>
                  </label>
                  <label class="flex items-start gap-3 rounded-xl border border-gray-200 p-4 cursor-pointer">
                    <input type="radio" name="process_mode" value="smart_rewrite" class="mt-1" />
                    <div>
                      <div class="text-sm font-semibold text-gray-900">智能仿写</div>
                      <div class="text-xs text-gray-500">更注重表达优化与适配</div>
                    </div>
                  </label>
                </div>
              </div>

              <div>
                <label class="block text-sm font-semibold text-gray-700">发布账号</label>
                <select name="publish_account" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2">
                  <option value="default">Default</option>
                  <option value="account_a">Account A</option>
                  <option value="account_b">Account B</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-semibold text-gray-700">任务标题（可选）</label>
                <input id="hf-task-title" name="task_title" class="mt-2 w-full rounded-xl border border-gray-300 px-3 py-2" type="text" placeholder="{{ t('label.title.placeholder') }}" />
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div class="sticky bottom-0 left-0 right-0 bg-white/90 backdrop-blur border-t border-gray-200">
      <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
        <div class="text-sm text-gray-500">{{ t("hot.follow.new.subtitle") }}</div>
        <div class="flex items-center gap-3">
          <button id="hf-create" class="btn-primary" disabled>{{ t("hot.follow.new.cta") }}</button>
          <span class="text-xs text-gray-500" id="hf-create-msg"></span>
        </div>
      </div>
    </div>
  </div>

  <script src="/static/js/i18n_v185.js"></script>
  <script src="/static/js/hot_follow_new.js"></script>
</body>
</html>
